<!DOCTYPE html>
<html ng-app="carte">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
	<title>Métro ou Vélo ? VERSION DE TEST</title>

	<link href="lib/ionic/css/ionic.min.css" rel="stylesheet">
	<link href="css/style.css" rel="stylesheet">
    <link href="lib/autocomplete/autocomplete.min.css" rel="stylesheet">

   	<!-- google maps javascript -->
   	<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,places&language=fr"></script>


   
	<!-- Importation du js -->
	<script src="lib/ionic/js/ionic.bundle.min.js"></script>

    <script src="lib/ngCordova/dist/ng-cordova.min.js"></script>
    <script src="cordova.js"></script>
    
    
    
<!--
    <script src="js/minify/DirectionCtrlMini.js"></script>
-->
	<script src="js/app.js"></script>    
    <script src="js/markerclusterer_packed.js"></script>
    <script src="lib/autocomplete/autocomplete.js"></script>
	<script src="js/DirectionCtrl.js"></script>
    
</head>

  
<body class="body" ng-controller="DirectionCtrl">
	
    <!-- Le bandeau supérieur avec le nom de l'application -->
    <header class="bar-positive bar-header bar header_definir_un_trajet">
       <!-- <button class="button button-icon icon ion-navicon" ng-click="openModal(3)"></button>-->
        <h1 class="title Titre-Appli">{{Titre_Recommandation}}<!--<button class="button button-icon icon ion-help" ng-show="show_card_recommandation" ng-click="openModal(4)"></button>--></h1>
        <div class="button button-clear" ng-click="openModal(2)"><span class="icon ion-information-circled"></span></div>
    </header>
<ion-content>

	 <div class="list card definir_un_trajet_card" ng-show="show_card_definir_un_trajet">
		<div class="item item-divider definir_un_trajet_titre_card">
			<center>Définir un trajet</center>
            <div class="button button-clear close-button-card" ng-click="showCard()">
                <span class="icon ion-close close-button-icon"></span>
            </div>
		</div>
		<div class="item item-body">
            <div class="list list-inset">
	
                <label class="item item-input search_start">
				    <i class="icon ion-search placeholder-icon"></i>
					<input type="search" placeholder="D'où partez vous ?" g-places-autocomplete options="{componentRestrictions: { country: 'fr' }}" details="detailsCityStart" ng-model="city_start" name="city_start" id="city_start"> 
                </label>
                <a ng-click="centerOnMe()" class="button button-icon icon ion-android-locate geolocate-button"></a>
               
                <label class="item item-input search_end">
					<a class="icon ion-search placeholder-icon"></a>
					<input type="search" placeholder="Où voulez-vous aller ?" g-places-autocomplete options="{componentRestrictions: { country: 'fr' }}" details="detailsCityEnd" ng-model="city_end" name="city_end" id="city_end">
				</label>
            </div>
            <div class="heure_de_depart">
                Départ à :
                <button class="button button-clear hour_select_definir_un_trajet" ng-click="openDatePicker()">
                    {{heure_choisie}} : {{minute_choisie}}
                </button>
                <a class="button button-icon icon ion-android-stopwatch clock_depart" ng-click="setTime()"></a>
            
                <center>
                    <button ng-click="calculate(detailsCityStart, detailsCityEnd, minute_choisie, heure_choisie)" class="button button-outline button-positive validerButtonTrajet">
                        Valider
                    </button>
                </center>
            </div>
		</div>
		

	</div>        
    

    <!-- Carte de recommandation qui s'affiche après avoir calculé le trajet  -->
    <div class="card card_recommandation" ng-show="show_card_recommandation">
        <div class="item item-text-wrap text_recommandation">
            <!-- Montrer l'icône d'un vélo ou d'un métro !-->
<!--
            <i class="icon ion-android-bicycle"></i>
-->
            <!-- On affiche la recommandation ainsi que la distance à pied entre la station de vélib la plus proche et la durée du trajet -->
            <div>Station Vélib la plus proche à : {{donneesVelibPlusProche.distance.value}} m ({{donneesVelibPlusProche.duration.text}})</div>
        </div>
    </div>

    <!-- Affichage de l'objet map de l'api google (affichage de la carte) -->
    <map id="map" class="map_animation" ng-class="{big_map : sizeMap=='big', small_map : sizeMap=='small'}" data-tap-disabled="true" on-touch="reloadMap()"></map>
    

    
    
    
    <!-- Affichage des boutons de stations vélibs et de définition du trajet -->
<!--	<img class="button button-icon icon" src="res/img/android-locate-bis.png" id="geolocate_button" ng-click="centerOnMe()" ng-show="isKeyboardNotVisible()"></img>-->
	<img class="button button-icon icon" src="res/img/Plus.png" id="navigate_button" ng-click="showCard()" ng-show="showButtonsOnMap"></img>
    <img class="button button-icon icon" src="res/img/android-bicycle-button.png" id="bicycle_button" ng-click="displayVelibStations()" ng-show="showButtonsOnMap"></img>
    <!--<img class="button button-icon icon" src="res/img/android-navigate-bisbis.png" id="cutButton" ng-click="cutThePath()" ng-show="showButtonsOnMap"></img>-->


	<!--Footer qui affiche le temps de trajet et la distance   -->
	<div class="list card footer_card_definir_un_trajet" ng-show="show_donnees_du_trajet">
		<!--On ne montre le résultat que si un trajet a été rentré, d'où le ng-show-->
        <div class="item tabs tabs-secondary tabs-icon-left" ng-click="openModal(1)">
            <a class="tab-item">
              <i class="icon ion-map"></i>
              <strong style="font-size:130%;">{{donnees_du_trajet.routes[0].legs[0].distance.text}}</strong>
            </a>
            <a class="tab-item">
              <i class="icon ion-clock"></i>
              <strong style="font-size:130%;">{{donnees_du_trajet.routes[0].legs[0].duration.text}}</strong>
                
            </a>
            
            <!-- Modal qui va afficher les étapes du trajet -->
            <script id="modal_affichage_trajet.html" type="text/ng-template">
                <ion-modal-view class="modal modal_affichage_trajet" on-click="closeModal()">
                    <div no-tap-scroll="true" class="bar bar-header header_panel">
                        <h1 class="title"> 
                            <div class="km_modal" ng-click="closeModal()">
                                <i class="icon ion-map"></i>
                                <strong style="font-size:130%;">{{donnees_du_trajet.routes[0].legs[0].distance.text}}</strong>
                            </div>
                            <div class="h_modal" ng-click="closeModal()">
                                <i class="icon ion-clock"></i>
                                <strong style="font-size:130%;">{{donnees_du_trajet.routes[0].legs[0].duration.text}}</strong>
                            </div>
                        </h1>
                    </div>
                    <div id="PanelTrajet" class="PanelTrajet">
                    </div>
                </ion-modal_view>
            </script>
            
            <!-- Modal qui va afficher une aide (définition des boutons,...) -->
            <script id="modal_affichage_aide.html" type="text/ng-template">
                <ion-modal-view class="modal modal-affichage-aide">
                    <header class="bar bar-header bar-positive">
                      <h1 class="title">Besoin d'aide ?</h1>
                      <div class="button button-clear" ng-click="closeModal(2)"><span class="icon ion-close"></span></div>
                    </header>
                   
                    <div class="list list-aide">
                        <div class="item item-divider item-divider-modal-aide">
                            <center class="text-modal-aide-divider">Actions</center>
                        </div>
                        <div class="item item-list-aide">
                            <img class="icon icon-modal-aide" src="res/img/Plus.png"></img>
                            <div class="text-modal-aide">
                            Définir un nouveau trajet
                            </div>
                        </div>
                        <div class="item item-list-aide item-2">
                            <img class="icon icon-modal-aide" src="res/img/android-bicycle-button.png"></img>
                            
                            <div>
                           
                            <p class="text-modal-aide item2 p1">Appui 1 : Nombre de Vélib' restants</p>
                            <p class="text-modal-aide item2 p2">Appui 2 : Nombre de places disponibles</p>
                            </div>
                        </div>
                        <div class="item item-divider item-divider-modal-aide">
                            <center class="text-modal-aide-divider">Carte</center>
                        </div>
                        <div class="item item-list-aide">
                            <img class="icon icon-modal-aide" src="res/img/MapLegend/SentiersCyclables.png"></img>
                            <span class="text-item3">Sentiers cyclables</span>
                        </div>
                        <div class="item item-list-aide">
                            <img class="icon icon-modal-aide" src="res/img/MapLegend/PistesCyclables.png"></img>
                            <span class="text-item3">Pistes cyclables</span>
                        </div>
                        <div class="item item-list-aide">
                            <img class="icon icon-modal-aide" src="res/img/MapLegend/VoiesDouces.png"></img>
                            <span class="text-item3">Voies adaptées pour les vélos</span>
                        </div>
                    </div>
                </ion-modal-view>
            </script>
            
            
            
        </div>
    </div>

	</ion-content>
	
		

		




</body>

</html>

